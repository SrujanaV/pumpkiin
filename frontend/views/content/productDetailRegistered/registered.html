<div class="container">
    <div class="product-registration-detail">
        <div ui-sref="openticket" class="my-3 back">
            <img src="img/registeredProduct/back-icon.png">
            <span class="ml-2 font14">BACK TO HOME</span>
        </div>
        <div class="row">
            <div class="col-12 col-md-4">
                <div class="d-flex bg-white border-rounded">
                    <div class="w-15 border-right more-images">
                        <div class="p-2" ng-repeat="productImg in productDetails.productImages">
                            <img class="img-thumbnail" ng-src="{{productImg | serverimage}}" alt="" ng-click="setImage(productImg)" ng-if="(productImg|checkimage) !='pdf'">
                            <a fancybox-box data-fancybox="gallery" ng-href="{{productImg|uploadpath}}" ng-if="(productImg|checkimage) =='pdf'" rel="gal">
                                <i class="fas fa-file-pdf fa-2x"></i>
                            </a>
                        </div>
                    </div>
                    <div class="w-85 p-3 float-right position-relative">
                        <img class="img-thumbnail" ng-src="{{setImg | serverimage}}" alt="" ng-if="(setImg|checkimage) !='pdf'">
                        <a fancybox-box data-fancybox="gallery" ng-href="{{setImg|uploadpath}}" ng-if="(setImg|checkimage) =='pdf'" rel="gal">
                            <i class="fas fa-file-pdf fa-4x"></i>
                        </a>
                        <!-- <div class="position-absolute favourite">
                            <i class="fas fa-heart"></i>
                        </div> -->
                    </div>
                </div>
                <div class="d-flex my-3">
                    <!-- <a role="button" class="button added-btn py-1 mr-1 w-50 text-center">Product Added</a> -->
                    <a role="button" ui-sref="ticketcreation({id: productDetails._id})" class="button orange-btn py-1 w-50 mx-auto text-center">Support</a>
                </div>
            </div>
            <div class="col-12 col-md-8">
                <div class="bg-white p-4 border-rounded fontRobotoRegular font14">
                    <h6 class="fontRobotoBold blue-color mb-2">PRODUCT INFORMATION
                        <span class="float-right info-icon" ng-click="personalInfo=!personalInfo;">
                            <i class="fas fa-pencil-alt fa-xs cursor-point"></i>
                        </span>
                    </h6>
                    <div class="row">
                        <div class="col-5 col-lg-3 fontRobotoMedium dark-font-color">
                            <div class="my-2 height-label">Product Name</div>
                            <div class="my-2 height-label">Brand Name</div>
                            <div class="my-2 height-label">Serial Number</div>
                            <div class="my-2 height-label">Purchase Date</div>
                            <div class="my-2 height-label">Purchase Price</div>
                            <div class="my-2 height-label">Retailer</div>
                        </div>
                        <div class="col-7 col-lg-9 fontRobotoRegular font-color text-capitalize">
                            <div class="my-2 height-label">
                                <div class="custom-input">
                                    <input type="text" id="productName" name="" ng-model="productDetails.productName" ng-readonly="!personalInfo">
                                </div>
                            </div>
                            <div class="my-2 height-label">
                                <div class="custom-input">
                                    <input type="text" id="productName" name="" ng-model="productDetails.brand" ng-readonly="!personalInfo">
                                </div>
                            </div>
                            <!-- <pre>{{productDetails|json}}</pre> -->
                            <!-- <div class="my-2 height-label" ng-init="data ={}">
                                <div class="custom-input" ng-if="!personalInfo">
                                    <input type="text" id="brandName" name="" ng-model="productDetails.brand"
                                        ng-readonly="!personalInfo">
                                </div> -->
                            <!-- <ui-select class="w-100" ng-model="data.brand" theme="selectize" ng-disabled="ctrl.disabled" title="Choose a brand" ng-if="personalInfo">
                                    <ui-select-match placeholder="Select or search a brand in the list...">{{$select.selected.name}}</ui-select-match>
                                    <ui-select-choices class="background-blue text-white" repeat="brand in brandsData | filter: $select.search">
                                        <span ng-bind-html="brand.name | highlight: $select.search"></span>
                                    </ui-select-choices>
                                </ui-select> -->
                            <!-- </div> -->
                            <div class="my-2 height-label">
                                <div class="custom-input ">
                                    <input type="text" id="serialNumber" name=" " ng-model="productDetails.serialNo" ng-readonly="!personalInfo">
                                </div>
                            </div>
                            <div class="my-2 height-label">
                                <div class="custom-input ">
                                    <input type="date" id="purchaseDate" name="" ng-model="productDetails.purchaseDate" ng-readonly="!personalInfo">
                                </div>
                            </div>
                            <div class="my-2 height-label">
                                <div class="custom-input ">
                                    <input type="text" id="purchasePrice" name=" " ng-model="productDetails.purchasePrice" ng-readonly="!personalInfo">
                                </div>
                            </div>
                            <div class="my-2 height-label">
                                <div class="custom-input ">
                                    <input type="text" id="Retailer" name=" " ng-model="productDetails.retailer" ng-readonly="!personalInfo">
                                </div>
                            </div>
                        </div>
                    </div>
                    <h6 class="fontRobotoBold blue-color my-3">PRODUCT USERS </h6>
                    <!-- <div class="d-flex main-users" ng-if="!personalInfo">
                        <div class="d-flex align-items-center existing-user p-2 mr-3">
                            <div class="mx-2 fontRobotoRegular name-rel">
                                <div>chintan</div>
                            </div>
                        </div>
                    </div> -->
                    <!-- <div ng-repeat="user in userDetails.relations">
                        <div class="custom-input font12 ml-0 ml-md-5 d-inline-block fontRobotoLight ">
                            <input type="text" id="warrantyExpDate" name="" ng-model="relation.name" readonly="readonly " ng-readonly="!warranty ">
                        </div>
                    </div> -->
                    <div ng-if="personalInfo">
                        <div class="row form-group">
                            <div class="col-12 col-md-6">
                                <label class="mb-0">Search for existing user</label>
                                <ui-select multiple tagging tagging-label="(custom 'new' label)" ng-model="data.Users" theme="bootstrap" sortable="true"
                                    ng-disabled="ctrl.disabled" style="width: 300px;" title="Choose a user">
                                    <ui-select-match class="selected-tags" placeholder="">
                                        <span ng-if="$item.user.name"> {{$item.user.name}}</span>
                                        <span ng-if="!$item.user.name"> {{$item}}</span>
                                    </ui-select-match>
                                    <ui-select-choices repeat="users in userDetails.relations | filter:$select.search">
                                        {{users.user.name}}
                                    </ui-select-choices>
                                </ui-select>
                            </div>
                        </div>
                        <form name="newuser" ng-submit="addUser(userData)">
                            <div class="row form-group">
                                <div class="col-12 col-md-6">
                                    <label class="mb-0">Name * </label>
                                    <input name="user" ng-model="userData.name" class="form-control form-control-sm" type="text" required only-letters-input>
                                    <!-- <span class="error" ng-show="newuser.user.$invalid && newuser.user.$touched">
                                        Please, enter user name</span> -->
                                </div>
                                <div class="col-12 col-md-6">
                                    <label class="mb-0">Email * </label>
                                    <input name="email" ng-model="userData.email" class="form-control form-control-sm" type="email" required>
                                    <!-- <span class="error" ng-show="newuser.email.$invalid && newuser.email.$touched">
                                        Please, enter user email</span> -->
                                </div>
                            </div>
                            <div class="row form-group">
                                <div class="col-12 col-md-6">
                                    <label class="mb-0">Mobile Number * </label>
                                    <input name="mobile" ng-model="userData.mobile" class="form-control form-control-sm" type="text" maxlength="10" required
                                        only-digits>
                                    <!-- <span class="error" ng-show="newuser.mobile.$invalid && newuser.mobile.$touched">
                                        Please, enter user contact</span> -->
                                </div>
                                <div class="col-12 col-md-6">
                                    <label class="mb-0">NickName</label>
                                    <input ng-model="userData.nickName" class="form-control form-control-sm" type="text">
                                </div>
                            </div>
                            <div class="row form-group">
                                <div class="col-12 col-md-6">
                                    <label class="mb-0">Relationship * </label>
                                    <select class="form-control" id="sel1" name="sellist1" ng-model="userData.relation" required>
                                        <option ng-repeat="relations in relationsForUser">{{relations}}</option>
                                    </select>
                                    <!-- <span class="error" ng-show="newuser.sellist1.$invalid && newuser.sellist1.$touched">
                                        Please, select relationship</span> -->
                                </div>
                            </div>
                            <!-- <fieldset class="row form-group" ng-click="addUser(userData)" ng-disabled="newuser.$invalid">
                                <div class="d-flex social m-3 add">
                                    <span class="social_icon">
                                        <i class="fas fa-plus"></i>
                                    </span>
                                    <div class="social-text">Add User</div>
                                </div>
                            </fieldset> -->
                            <button class="row form-group" type="submit">
                                <div class="d-flex social m-md-3 mx-auto my-3 add add-user-purchase">
                                    <span class="social_icon">
                                        <i class="fas fa-plus"></i>
                                    </span>
                                    <div class="social-text">Add User</div>
                                </div>
                            </button>
                            <div class="d-flex main-users">
                                <div class="d-flex align-items-center existing-user p-2 mr-3" ng-repeat="rel in productDetails.relatedUser">
                                    <div class="mx-2 fontRobotoRegular name-rel">
                                        <div>{{rel.user.name}}</div>
                                    </div>
                                    <div class="fontRobotoLight" ng-click="removeRelation(rel._id)">
                                        <i class="fas fa-times"></i>
                                    </div>
                                </div>
                            </div>
                        </form>
                        <fieldset class="d-flex social m-3 save mx-auto">
                            <span class="social_icon">
                                <i class="fas fa-save"></i>
                            </span>
                            <div class="social-text" ng-click="updateData(productDetails,data)">Save</div>
                        </fieldset>
                    </div>
                    <!-- <pre>{{userDetails.relations|json}}</pre> -->
                    <div class="d-flex main-users" ng-if="!personalInfo">
                        <div class="d-flex align-items-center existing-user p-2 mr-3" ng-repeat="rel in userDetails.relations">
                            <div class="mx-2 fontRobotoRegular name-rel">
                                <div>{{rel.user.name}}</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="bg-white p-4 my-2 border-rounded position-relative reg-product-det">
                    <h6 class="fontRobotoBold blue-color">WARRANTY
                        <span class="ml-2">
                            <img ng-if="!productDetails.ribbon" src="img/ticketCreation/warranty.png">
                            <img ng-if="productDetails.ribbon" src="img/ticketCreation/red_warranty.png">
                        </span>
                        <span class="float-right info-icon" ng-click="warranty=!warranty;">
                            <i class="fas fa-pencil-alt fa-xs cursor-point"></i>
                        </span>
                    </h6>
                    <div>
                        <span class="fontRobotoRegular font14 dark-font-color ">Warranty expiration date</span>
                        <div class="custom-input font12 ml-0 ml-md-5 d-inline-block fontRobotoLight ">
                            <input type="date" id="warrantyExpDate" name="" ng-model="productDetails.warrantyExpDate" readonly="readonly " ng-readonly="!warranty ">
                        </div>
                    </div>
                    <span class="green-color" ng-if="productDetails.warrantyCardImage">({{productDetails.warrantyCardImage.length}})</span>
                    <div class="scrollbar d-flex">
                        <div class="" id="scrollbar" ng-if="warranty">
                            <div class="mt-2">
                                <upload-image multiple ng-model="productDetails.warrantyCardImage" no-status="true"></upload-image>
                            </div>
                        </div>
                        <div class="d-flex mt-2" ng-if="!warranty">
                            <div class="rounded mr-1 image-style" ng-repeat="warrantyImages in productDetails.warrantyCardImage">
                                <img class="img-thumbnail" ng-src="{{warrantyImages | serverimage}}" alt="" ng-if="(warrantyImages|checkimage) !='pdf'">
                                <a fancybox-box data-fancybox="gallery" ng-href="{{warrantyImages|uploadpath}}" ng-if="(warrantyImages|checkimage) =='pdf'"
                                    rel="gal">
                                    <i class="fas fa-file-pdf fa-4x"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                    <fieldset class="d-flex social mt-3 mb-0 save mx-auto" ng-if="warranty">
                        <span class="social_icon">
                            <i class="fas fa-save"></i>
                        </span>
                        <div class="social-text" ng-click="updateData(productDetails)">Save</div>
                    </fieldset>
                </div>
                <div class="bg-white p-4 my-2 border-rounded position-relative reg-product-det ">
                    <h6 class="fontRobotoBold blue-color ">INSURANCE
                        <span class="float-right info-icon" ng-click="insurance=!insurance ">
                            <i class="fas fa-pencil-alt fa-xs cursor-point"></i>
                        </span>
                    </h6>
                    <div>
                        <span class="fontRobotoRegular font14 dark-font-color ">Insurance expiration date</span>
                        <div class="custom-input font12 ml-0 ml-md-5 d-inline-block fontRobotoLight ">
                            <input type="date" id="insuranceExpDate" name="" ng-model="productDetails.insuranceExpDate" ng-readonly="!insurance">
                        </div>
                    </div>
                    <span class="green-color" ng-if="productDetails.insuranceProofImage">({{productDetails.insuranceProofImage.length}})</span>
                    <div class="scrollbar d-flex">
                        <div class="" id="scrollbar" ng-if="insurance">
                            <div class="mt-2">
                                <upload-image multiple ng-model="productDetails.insuranceProofImage" no-status="true"></upload-image>
                            </div>
                        </div>
                        <div class="d-flex mt-2" ng-if="!insurance">
                            <div class="rounded mr-1 image-style" ng-repeat="insuranceImages in productDetails.insuranceProofImage">
                                <img class="img-thumbnail" ng-src="{{insuranceImages | serverimage}}" alt="" ng-if="(insuranceImages|checkimage) !='pdf'">
                                <a fancybox-box data-fancybox="gallery" ng-href="{{insuranceImages|uploadpath}}" ng-if="(insuranceImages|checkimage) =='pdf'"
                                    rel="gal">
                                    <i class="fas fa-file-pdf fa-4x"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                    <fieldset class="d-flex social mt-3 mb-0 save mx-auto" ng-if="insurance">
                        <span class="social_icon">
                            <i class="fas fa-save"></i>
                        </span>
                        <div class="social-text" ng-click="updateData(productDetails)">Save</div>
                    </fieldset>
                </div>
                <div class="bg-white p-4 my-2 border-rounded position-relative reg-product-det">
                    <h6 class="fontRobotoBold blue-color ">ACCESSORIES
                        <span class="float-right info-icon " ng-click="accessories=!accessories">
                            <i class="fas fa-pencil-alt fa-xs cursor-point"></i>
                        </span>
                    </h6>
                    <div class="row form-group" ng-if="accessories">
                        <div class="col-12 col-md-6">
                            <form ng-submit="addAccessories(formData)">
                                <input class="form-control form-control-sm" ng-model="formData.accessories" type="text" placeholder="Type Accessories And Enter To Add"
                                    required>
                            </form>
                        </div>
                    </div>
                    <div class="d-flex main-users" ng-if="accessories">
                        <div class="d-flex align-items-center existing-user p-2 mb-1 mr-2" ng-repeat="accessories in productDetails.productAccessory track by $index">
                            <div class="user-circle"></div>
                            <div class="mx-2 fontRobotoRegular name-rel">
                                <div>{{accessories}}</div>
                                <!-- <span class="fontRobotoLight">{{accessories.relation}}</span> -->
                            </div>
                            <div class="ml-auto fontRobotoLight" ng-click="remove($index)">
                                <i class="fas fa-times cursor-point"></i>
                            </div>
                        </div>
                    </div>
                    <div class="d-flex main-users" ng-if="!accessories">
                        <div class="d-flex align-items-center existing-user p-2 mb-1 mr-2" ng-repeat="accessories in productDetails.productAccessory track by $index">
                            <div class="mx-2 fontRobotoRegular name-rel">
                                <div>{{accessories}}</div>
                            </div>
                        </div>
                    </div>
                    <fieldset class="d-flex social mt-3 mb-0 save mx-auto" ng-if="accessories">
                        <span class="social_icon">
                            <i class="fas fa-save"></i>
                        </span>
                        <div class="social-text" ng-click="addProduct()">Save</div>
                    </fieldset>
                </div>
                <div class="support-chat-history mb-5 ">
                    <h6 class="fontRobotoBold blue-color my-4 ">SUPPORT CHAT HISTORY</h6>
                    <div class="bg-white border-rounded p-4 my-2 " ng-repeat="tickets in ticketData" ui-sref="ticketcreation">
                        <div class="d-flex align-items-center ">
                            <div class="blue-circle "></div>
                            <h6 class="fontRobotoBold font14 ml-2 mb-0 ">{{tickets.ticketNumber}}</h6>
                            <!-- <span class="font12 font-color ml-2 d-inline-block w-25 text-truncate ">Dear Support Team, Maecenas faucibus mollis interdum. Etiam porta sem malesuada...</span> -->
                            <div class="ml-auto date-supportchat ">
                                <span class="font12 ">{{tickets.issueReported | date}}</span>
                            </div>
                            <div class="ml-auto green-color ">
                                <span class="font12 " ng-if="tickets.status=='Active'">Open</span>
                                <span class="font12 " ng-if="tickets.status=='Closed'">Closed</span>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>